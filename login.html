<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تسجيل الدخول</title>

<style>
body {
    font-family: sans-serif;
    text-align: center;
    background: #eef5e3;
    padding-top: 100px;
}
.box {
    width: 300px;
    background: white;
    margin: auto;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 3px 12px rgba(0,0,0,0.2);
}
input, button {
    width: 90%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #bbb;
}
button {
    background: #2e7d32;
    color: white;
    cursor: pointer;
}
.error { color: red; margin-top: 10px; }
</style>
</head>
<body>

<div class="box">
    <h2>تسجيل الدخول</h2>
    <input id="user" placeholder="اسم المستخدم">
    <input id="pass" type="password" placeholder="كلمة المرور">
    <button onclick="login()">دخول</button>
    <p id="error" class="error"></p>
</div>

<script>
// إنشاء أدمن افتراضي
if (!localStorage.getItem("users")) {
    let defaultAdmin = [
        { id: 1, username: "admin", password: "12345", role: "admin" }
    ];
    localStorage.setItem("users", JSON.stringify(defaultAdmin));
}

function login() {
    let username = document.getElementById("user").value.trim();
    let password = document.getElementById("pass").value.trim();
    let error = document.getElementById("error");

    let users = JSON.parse(localStorage.getItem("users") || "[]");

    let user = users.find(u => u.username === username && u.password === password);

    if (user) {
        localStorage.setItem("logged", "true");
        localStorage.setItem("role", user.role);
        localStorage.setItem("currentUser", username);

        if (user.role === "admin") {
            window.location.href = "admin.html";
        } else {
            window.location.href = "index.html";
        }
    } else {
        error.textContent = "البيانات غير صحيحة";
    }
}
</script>

<script>
// إنشاء أدمن افتراضي إذا ما كان موجود
if (!localStorage.getItem("users")) {
    let defaultAdmin = [
        {
            id: 1,
            username: "admin",
            password: "12345",
            role: "admin"
        }
    ];
    localStorage.setItem("users", JSON.stringify(defaultAdmin));
}
</script>

    
</body>
</html>
